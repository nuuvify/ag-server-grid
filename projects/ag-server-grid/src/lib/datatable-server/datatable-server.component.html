<section class="table__body">
  <div style="display: flex; justify-content:right; padding: 3px;   flex-wrap: wrap;">
    @if(exportCsv){
    <div style="margin-right: 5px;">
      <button class="btn" (click)="exportAsXLSX()">Export csv</button>
    </div>
    }
    @if(editable){
    <div style="margin-right: 5px;">
      <button [disabled]="itensSelecionados.length == 0 || itensSelecionados.length> 1" (click)="getRowEditSelect()"
        class="btn">Alterar</button>
    </div>
    }
    @if(deletable){
    <div style="margin-right: 5px;">
      <button class="btn" (click)="getRowListDeleteSelect()">Excluir</button>
    </div>
    }
  </div>
  <table id="catTable">
    <thead id="cat-table-header">
      <tr>
        @for (header of columnDefs; track header) {
        <th scope="col" (click)="sortBy(header.field)" onKeyDown="sortBy(header.field)"
          [style.minWidth.px]="header.minWidth != undefined ? header.minWidth : 50"
          [style.maxWidth.px]="header.maxWidth != undefined ? header.maxWidth : 50">{{
          header.changeName != undefined ? header.changeName : header.headerName != undefined ?
          header.headerName : header.field
          }}{{sortIcon(header.field)}}</th>
        }
      </tr>
    </thead>
    <tbody id="cat-table-body">
      @if(rowData.length === 0){
      <tr>
        <td [attr.colspan]="columnDefs.length" class="no-records-message">
          <div class="message-container">
            <p>Nenhum registro encontrado.</p>
          </div>
        </td>
      </tr>
      }@else{
      @for (item of rowData | searchFilter: searchText; track item; let i = $index) {
      <tr (dblclick)="getRow(item)" [class.selected]="isSelecionado(i)" (click)="selecionarLinha(i, $event)">
        @for (h of columnDefs; track h) {
        <ng-container>
          @if(!shouldSkipCell(h)){
          <td title={{item[h.field]}}>{{ item[h.field] | dateOrString }}</td>
          }
          @if(h.showButton===true){
          <td title={{h.configButton?.text}}><button class={{h.configButton?.class}}
              (click)="buttonClick($event, item)"><i
                class={{h.configButton?.icon}}></i>{{h.configButton?.text}}</button>
          </td>
          }
        </ng-container>
        }
      </tr>
      }
      }
    </tbody>
  </table>
  @if (pagination && rowData.length > 0 && (configPag != undefined && configPag.totalPages > 1)) {
  <pagination-server [pager]="pager" [configPag]="configPag" (paginachange)="listagem($event)"
    (next)="nextLevel($event)" (prev)="prevLevel($event)" (setPage)="setPagination($event)"></pagination-server>
  }
</section>
